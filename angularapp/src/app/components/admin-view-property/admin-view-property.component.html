<div class="page-background">
  <div class="card">
    <h2 class="section-title">Manage Properties</h2>
    <hr>
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

    <div class="filter-bar">
      <div class="filter-left">
        <label class="yellow-label" for="">Search by:</label>
        <input type="text" [(ngModel)]="searchTerm" (input)="applyFilters()" placeholder="Property Title" />
      </div>

      <div class="filter-right">
        <label class="yellow-label" for="">Filter by Type:</label>
        <select [(ngModel)]="selectedType" (change)="applyFilters()">
          <option value="">All Types</option>
          <option *ngFor="let type of propertyTypes" [value]="type">{{ type }}</option>
        </select>
      </div>
    </div>

    <p *ngIf="filteredProperties.length === 0" class="error-message">
      No properties available. Add some properties to view here.
    </p>

    <table *ngIf="filteredProperties.length > 0" class="custom-table dark-table">
      <thead>
        <tr>
          <th>S.No</th>
          <th>Title</th>
          <th>Description</th>
          <th>Location</th>
          <th>Price</th>
          <th>Type</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let property of filteredProperties; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ property.title }}</td>
          <td>{{ property.description }}</td>
          <td>{{ property.location }}</td>
          <td>{{ property.price | currency }}</td>
          <td>{{ property.type }}</td>
          <td>{{ property.status }}</td>
          <td>
            <div class="action-buttons">
              <button class="btn btn-edit" (click)="editProperty(property.propertyId)">Edit</button>
              <button class="btn btn-delete" (click)="promptDelete(property.propertyId)">Delete</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="overlay" *ngIf="showDeleteConfirm">
    <div class="confirm-box">
      <p>Are you sure you want to delete this property?</p>
      <div class="confirm-actions">
        <button class="btn btn-delete" (click)="confirmDelete()">Yes, Delete</button>
        <button class="btn btn-cancel" (click)="cancelDelete()">Cancel</button>
      </div>
    </div>
  </div>
</div>